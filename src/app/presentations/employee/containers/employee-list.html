<p-toast />
<p-fluid>
  <div class="card">
    <div class="mb-4 flex items-center justify-between">
      <div class="text-2xl font-semibold">Employee List</div>
      <p-button
        label="Add Employee"
        icon="pi pi-plus"
        (onClick)="onAddEmployeeButtonClick()"
        severity="success"
      />
    </div>
    <p-table
      #dt1
      [value]="$employees()"
      dataKey="id"
      [rows]="rowsPerPage"
      [loading]="$isLoading()"
      [rowHover]="true"
      [showGridlines]="true"
      [paginator]="true"
      [rowsPerPageOptions]="[10, 25, 50, 100]"
      [first]="first"
      (onPage)="onPageChange($event)"
      responsiveLayout="scroll"
    >
      <ng-template #caption>
        <div class="flex-column flex gap-4 sm:flex-row">
          <div class="flex flex-1 flex-col gap-2 sm:flex-row">
            <p-iconfield iconPosition="left" class="flex-1">
              <p-inputicon>
                <i class="pi pi-user"></i>
              </p-inputicon>
              <input
                pInputText
                type="text"
                placeholder="Search by username"
                class="w-full"
              />
            </p-iconfield>
            <p-iconfield iconPosition="left" class="flex-1">
              <p-inputicon>
                <i class="pi pi-envelope"></i>
              </p-inputicon>
              <input
                pInputText
                type="text"
                placeholder="Search by email"
                class="w-full"
              />
            </p-iconfield>
          </div>
          <p-button
            label="Clear Filters"
            icon="pi pi-filter-slash"
            [outlined]="true"
          />
        </div>
      </ng-template>
      <ng-template #header>
        <tr>
          <th style="min-width: 5rem">
            <div class="flex items-center justify-between">No</div>
          </th>
          <th pSortableColumn="username" style="min-width: 10rem">
            <div class="flex items-center justify-between">
              Username
              <p-sortIcon field="username" />
            </div>
          </th>

          <th pSortableColumn="email" style="min-width: 12rem">
            <div class="flex items-center justify-between">
              Email
              <p-sortIcon field="email" />
            </div>
          </th>
          <th pSortableColumn="birthDate" style="min-width: 10rem">
            <div class="flex items-center justify-between">
              Birth Date
              <p-sortIcon field="birthDate" />
            </div>
          </th>
          <th pSortableColumn="status" style="min-width: 10rem">
            <div class="flex items-center justify-between">
              Status
              <p-sortIcon field="status" />
            </div>
          </th>
          <th pSortableColumn="group" style="min-width: 10rem">
            <div class="flex items-center justify-between">
              Group
              <p-sortIcon field="group" />
            </div>
          </th>
          <th style="min-width: 10rem">
            <div class="flex items-center justify-between">Actions</div>
          </th>
        </tr>
      </ng-template>
      <ng-template #body let-employee let-rowIndex="rowIndex">
        <tr>
          <td>{{ first + rowIndex + 1 }}</td>
          <td>
            {{ employee.username }}
          </td>
          <td>
            {{ employee.email }}
          </td>
          <td>
            {{ employee.birthDate | date: 'MM/dd/yyyy' }}
          </td>
          <td>
            <p-tag
              [value]="employee.status"
              [severity]="employee.status | statusSeverity"
              class="dark:bg-surface-900! capitalize"
            />
          </td>
          <td>
            {{ employee.group }}
          </td>
          <td>
            <div class="flex gap-2">
              <p-button
                icon="pi pi-eye"
                [rounded]="true"
                [outlined]="true"
                severity="info"
                (onClick)="onViewDetailButtonClick(employee.id)"
              />
              <p-button
                icon="pi pi-pencil"
                [rounded]="true"
                [outlined]="true"
                severity="warn"
                (onClick)="onEditButtonClick(employee)"
              />
              <p-button
                icon="pi pi-trash"
                [rounded]="true"
                [outlined]="true"
                severity="danger"
                (onClick)="onDeleteButtonClick(employee)"
              />
            </div>
          </td>
        </tr>
      </ng-template>
      <ng-template #emptymessage>
        <tr>
          <td colspan="10">No employees found.</td>
        </tr>
      </ng-template>
      <ng-template #loadingbody>
        <tr>
          <td colspan="10">Loading employees data. Please wait.</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</p-fluid>
