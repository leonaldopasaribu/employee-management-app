<p-fluid>
  <form [formGroup]="employeeForm" class="card" (ngSubmit)="onSubmit()">
    <div class="text-2xl font-semibold">Create Employee</div>

    <div class="mt-6 flex flex-col gap-6">
      <div class="text-primary text-xl font-semibold">Personal Information</div>

      <div class="flex flex-col gap-6 md:flex-row">
        <div class="flex w-full flex-col gap-2">
          <label for="username">
            Username
            <span class="text-red-500">*</span>
          </label>
          <input
            pInputText
            id="username"
            type="text"
            formControlName="username"
            placeholder="Enter username"
            [class.ng-invalid]="isFieldInvalid('username')"
            [class.ng-dirty]="isFieldInvalid('username')"
          />
          @if (isFieldInvalid('username')) {
            <small class="text-red-500">{{ getFieldError('username') }}</small>
          }
        </div>
        <div class="flex w-full flex-col gap-2">
          <label for="email">
            Email
            <span class="text-red-500">*</span>
          </label>
          <input
            pInputText
            id="email"
            type="email"
            formControlName="email"
            placeholder="Enter email address"
            [class.ng-invalid]="isFieldInvalid('email')"
            [class.ng-dirty]="isFieldInvalid('email')"
          />
          @if (isFieldInvalid('email')) {
            <small class="text-red-500">{{ getFieldError('email') }}</small>
          }
        </div>
      </div>

      <div class="flex flex-col gap-6 md:flex-row">
        <div class="flex w-full flex-col gap-2">
          <label for="firstName">
            First Name
            <span class="text-red-500">*</span>
          </label>
          <input
            pInputText
            id="firstName"
            type="text"
            formControlName="firstName"
            placeholder="Enter first name"
            [class.ng-invalid]="isFieldInvalid('firstName')"
            [class.ng-dirty]="isFieldInvalid('firstName')"
          />
          @if (isFieldInvalid('firstName')) {
            <small class="text-red-500">{{ getFieldError('firstName') }}</small>
          }
        </div>
        <div class="flex w-full flex-col gap-2">
          <label for="lastName">
            Last Name
            <span class="text-red-500">*</span>
          </label>
          <input
            pInputText
            id="lastName"
            type="text"
            formControlName="lastName"
            placeholder="Enter last name"
            [class.ng-invalid]="isFieldInvalid('lastName')"
            [class.ng-dirty]="isFieldInvalid('lastName')"
          />
          @if (isFieldInvalid('lastName')) {
            <small class="text-red-500">{{ getFieldError('lastName') }}</small>
          }
        </div>
      </div>

      <div class="flex flex-col gap-6 md:flex-row">
        <div class="flex w-full flex-col gap-2">
          <label for="birthDate">
            Birth Date
            <span class="text-red-500">*</span>
          </label>
          <p-datepicker
            id="birthDate"
            formControlName="birthDate"
            [showIcon]="true"
            [maxDate]="maxDate"
            placeholder="Select birth date"
            dateFormat="dd/mm/yy"
            class="w-full"
            [class.ng-invalid]="isFieldInvalid('birthDate')"
            [class.ng-dirty]="isFieldInvalid('birthDate')"
          ></p-datepicker>
          @if (isFieldInvalid('birthDate')) {
            <small class="text-red-500">{{ getFieldError('birthDate') }}</small>
          }
        </div>
        <div class="flex w-full flex-col gap-2">
          <label for="basicSalary">
            Basic Salary
            <span class="text-red-500">*</span>
          </label>
          <p-inputnumber
            id="basicSalary"
            formControlName="basicSalary"
            mode="decimal"
            [minFractionDigits]="0"
            [maxFractionDigits]="2"
            placeholder="Enter basic salary"
            class="w-full"
            [class.ng-invalid]="isFieldInvalid('basicSalary')"
            [class.ng-dirty]="isFieldInvalid('basicSalary')"
          ></p-inputnumber>
          @if (isFieldInvalid('basicSalary')) {
            <small class="text-red-500">
              {{ getFieldError('basicSalary') }}
            </small>
          }
        </div>
      </div>
    </div>

    <div class="mt-6 flex flex-col gap-6">
      <div class="text-primary text-xl font-semibold">
        Employment Information
      </div>

      <div class="flex flex-col gap-6 md:flex-row">
        <div class="flex w-full flex-col gap-2">
          <label for="status">
            Status
            <span class="text-red-500">*</span>
          </label>
          <p-select
            id="status"
            formControlName="status"
            [options]="statusOptions"
            optionLabel="label"
            optionValue="value"
            placeholder="Select Status"
            class="w-full"
            [class.ng-invalid]="isFieldInvalid('status')"
            [class.ng-dirty]="isFieldInvalid('status')"
          ></p-select>
          @if (isFieldInvalid('status')) {
            <small class="text-red-500">{{ getFieldError('status') }}</small>
          }
        </div>
        <div class="flex w-full flex-col gap-2">
          <label for="group">
            Group/Department
            <span class="text-red-500">*</span>
          </label>
          <p-select
            id="group"
            formControlName="group"
            [options]="groupOptions"
            optionLabel="label"
            optionValue="value"
            placeholder="Select Group"
            [filter]="true"
            filterPlaceholder="Search groups..."
            class="w-full"
            [class.ng-invalid]="isFieldInvalid('group')"
            [class.ng-dirty]="isFieldInvalid('group')"
          ></p-select>
          @if (isFieldInvalid('group')) {
            <small class="text-red-500">{{ getFieldError('group') }}</small>
          }
        </div>
      </div>

      <div class="flex flex-col gap-2">
        <label for="description">
          Description
          <span class="text-red-500">*</span>
        </label>
        <textarea
          pTextarea
          id="description"
          rows="4"
          formControlName="description"
          placeholder="Enter employee description or notes"
          [class.ng-invalid]="isFieldInvalid('description')"
          [class.ng-dirty]="isFieldInvalid('description')"
        ></textarea>
        @if (isFieldInvalid('description')) {
          <small class="text-red-500">{{ getFieldError('description') }}</small>
        }
      </div>
    </div>

    <div class="flex justify-end gap-3 pt-6">
      <p-button
        label="Cancel"
        icon="pi pi-times"
        severity="secondary"
        type="button"
        (onClick)="onCancelButtonClick()"
      ></p-button>
      <p-button label="Save" icon="pi pi-check" type="submit"></p-button>
    </div>
  </form>
</p-fluid>
